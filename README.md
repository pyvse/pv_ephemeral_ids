# Ephemeral ID Generator for LLM use

> **Short, fair, and tokenizer-smart identifiers for LLM workflows.**

[![Version](https://img.shields.io/badge/version-0.1.0-blue.svg)](#)
[![License](https://img.shields.io/badge/license-BSD--3--Clause-green.svg)](#)
[![Language](https://img.shields.io/badge/language-Node.js-yellow.svg)](#)

> **TL;DR**: Identifiers guaranteed to be exactly thee tokens in length, each starting with a unique token, in the format `Aa0a`, with the last two tokens randomized upon allocation.

## Overview

LLM applications often need lightweight, temporary identifiers—for messages, references, entities, or variables—that are short, distinct, and play nicely with tokenizers. Traditional solutions like UUIDs or snowflakes are overkill in size and tend to introduce bias: UUIDs waste tokens, and snowflakes often begin with similar digits, leading to uneven sampling or attention.

This library provides a compact, tokenizer-friendly ID scheme designed for ephemeral use in LLM contexts. Identifiers are:
- **Short** (e.g. `Aa0a`), saving on tokens
- **Fairly distributed**, reducing model bias
- **Distinct** in both token and text space, ensuring clarity and stability in prompts

Whether you're replacing verbose identifiers in training data, assigning temporary message IDs in a dialogue system, or just need something better than `"123456789012345678"` in your prompt, this generator gives you clean, reusable tools that make sense in an LLM-native world.

## Installation

```bash
npm install 'github:kaetemi/pv_ephemeral_ids#HEAD:js'
```

## Design Goal

This library implements an identifier scheme which ensures fair sampling chances for all identifiers, as well as reducing predictability to avoid exploitation.

- First token of all identifiers in context is unique
- Remaining tokens of identifiers are randomized
- Similar structure in text space as well as in token space

## Identifier Format

The identifiers are in the format `Aa0a`, with the tokens separated as `Aa`, `0`, and `a`. Additionally, identifiers with prefixes can be prepared.

## Important Restrictions

Identifiers generated by this utility should **NEVER EVER** be used persistently. They are compact ephemeral placeholders for real identifiers.

Using them as replacements for real identifiers in training data is fine, as long as they are not re-used persistently between samples. Experiment with using the longer variant—in the format of `Aaa0a`, still three tokens—of the identifiers for training data instead.

## Implementation

This library includes a utility to scan a tokenizer for all valid identifiers that satisfy our design constraint. Identifiers are tested in use cases where they are surrounded by whitespace, various brackets and punctuation marks. There's an option to prefix the identifiers with one user-specified token.

For usage, an ID allocator is implemented to manage identifiers which are actively in use in the current context. It ensures that all active identifiers have a different starting token, and that the remaining tokens are randomly cycled when the starting token gets recycled.

## Additional Usage Considerations

If you are using a continuous windowed context, you should allocate identifiers as they enter the context window, and deallocate them as soon as the last reference exits the context window, rather than rebuilding your context with new identifiers each run, in order to ensure your context can be cached.

## Project Structure

```
pv_ephemeral_ids/
├── js/                         # Node.js implementation
│   ├── src/
│   │   ├── allocator.js        # Core ID allocator logic
│   │   ├── generator.js        # Identifier generator logic
│   │   └── index.js            # Entry point exports
│   ├── test/
│   │   └── generator.test.js   # Tests for the generator
│   ├── package.json            # Node.js package definition
│
├── py/                         # (TODO) Python implementation
│   ├── pv_ephemeral_ids/
│   │   ├── __init__.py
│   │   ├── allocator.py
│   │   └── generator.py
│   ├── tests/
│   │   └── test_generator.py
│   └── pyproject.toml          # Modern Python packaging
│
├── .gitignore
├── LICENSE.md
├── README.md                   # Main project README
```

## License

BSD 3-Clause License
Copyright (C) 2025 Jan BOON (Kaetemi) for Polyverse OÜ
